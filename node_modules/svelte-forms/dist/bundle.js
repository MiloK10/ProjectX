"use strict";function e(){}function t(t){let n;return function(t,...n){if(null==t)return e;const i=t.subscribe(...n);return i.unsubscribe?()=>i.unsubscribe():i}(t,(e=>n=e))(),n}function n(e){(function(){throw new Error("Function called outside component initialization")})().$$.after_update.push(e)}Object.defineProperty(exports,"__esModule",{value:!0});const i=[];function s(e,t){const n=parseFloat(t[0]);return(isNaN(e)?e.length:parseFloat(e))>=n}function r(e,t){const n=parseFloat(t[0]),i=isNaN(e)?e.length:parseFloat(e);return!!isNaN(i)||i<=n}var l=Object.freeze({__proto__:null,between:function(e,t){return s(e,[t[0]])&&r(e,[t[1]])},email:function(e,t){return Boolean(e)&&/^[a-zA-Z0-9_+&*-]+(?:\.[a-zA-Z0-9_+&*-]+)*@(?:[a-zA-Z0-9-]+\.)+[a-zA-Z]{2,7}$/.test(e)},max:r,min:s,required:function(e,t){if(null==e)return!1;if("string"==typeof e){return e.replace(/\s/g,"").length>0}return!0},url:function(e,t){return/(https?|ftp|git|svn):\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/i.test(e)},equal:function(e,t){return e===t[0]}});function a(e){return e.value}function o(e,t,{stopAtFirstFieldError:n}){const{name:i,value:s,validators:r=[],enabled:a=!0}=e;let o=!0,d=!1,u=[];return a&&r.some((e=>{const[r,a,c]=function(e,t,n,i,s=!0){let r,a=!0,o=!1;if(!1===s)return[a,r,o];if("function"==typeof n){const s=n.call(null,t);s.then?(o=!0,s.then((({name:t,valid:n})=>{i.update((i=>(i.fields[e]=i.fields[e]||{errors:[]},i.fields[e].pending=!1,i.fields[e].valid=n,n||i.fields[e].errors.push(t),i.valid=!Object.keys(i.fields).find((e=>!i.fields[e].valid)),i)))}))):(a=s.valid,r=s.name)}else{const e=n.split(/:/g);r=e.shift(),a=l[r].call(null,t,e)}return[a,r,o]}(i,s,e,t);if(!d&&c&&(o=!1,d=!0),!r)return o=!1,u=[...u,a],n})),{data:e,valid:o,errors:u,pending:d}}function d(e){const t={data:{},errors:[],pending:!1,valid:!0,enabled:!0,dirty:!1};return Object.fromEntries(Object.keys(e).map((n=>[n,{name:e[n].name||n,value:e[n].value,...t}])))}function u(e,n,i,s){const r=e.call(),l=t(n),d={fields:i,oldFields:{},dirty:!1,initCheck:s.initCheck};Object.keys(r).some((e=>{const t={name:e,...r[e]},u=l.fields[e]||{data:{},errors:[],pending:!1,valid:!0,enabled:!0,dirty:!1},c=i[e],f=a(t),p=a(u),v=t.enabled;if(v===u.enabled&&f&&f===p?(d.fields[e]=l.fields[e],v||(d.fields[e].valid=!0,d.fields[e].errors=[])):d.fields[e]=o(t,n,s),f!==c.value&&(d.dirty=!0),d.fields[e].dirty=f!==c.value,d.oldFields[e]=Object.assign({},u),s.stopAtFirstError)return!d.fields[e].valid})),d.valid=!Object.keys(d.fields).find((e=>!d.fields[e].valid)),n.set(d)}exports.bindClass=function(e,{form:t,name:n,valid:i="valid",invalid:s="invalid",dirty:r="dirty"}){const l=n||e.getAttribute("name");return{destroy:t.subscribe((t=>{if(!t.fields.hasOwnProperty(l))return;const n=t.fields[l];(!t.initCheck&&n.dirty||t.initCheck)&&(n.valid?(e.classList.add(i),e.classList.remove(s)):(e.classList.remove(i),e.classList.add(s))),n.dirty?e.classList.add(r):e.classList.remove(r)}))}},exports.form=function(t,s={}){let r=d(t.call());s=Object.assign({initCheck:!0,validateOnChange:!0,stopAtFirstError:!1,stopAtFirstFieldError:!0},s);const l=function(t,n=e){let s;const r=[];function l(e){if(l=e,((n=t)!=n?l==l:n!==l||n&&"object"==typeof n||"function"==typeof n)&&(t=e,s)){const e=!i.length;for(let e=0;e<r.length;e+=1){const n=r[e];n[1](),i.push(n,t)}if(e){for(let e=0;e<i.length;e+=2)i[e][0](i[e+1]);i.length=0}}var n,l}return{set:l,update:function(e){l(e(t))},subscribe:function(i,a=e){const o=[i,a];return r.push(o),1===r.length&&(s=n(l)||e),i(t),()=>{const e=r.indexOf(o);-1!==e&&r.splice(e,1),0===r.length&&(s(),s=null)}}}}({fields:r,oldFields:{},dirty:!1,valid:!0,initCheck:s.initCheck}),{subscribe:a,set:o,update:c}=l;return s.validateOnChange&&n((()=>{u(t,l,r,s)})),s.initCheck&&u(t,l,r,s),{subscribe:a,set:o,update:c,validate(){u(t,l,r,s)},reset(){const e=t.call();r=d(e),u(t,l,r,s)}}};
//# sourceMappingURL=bundle.js.map
