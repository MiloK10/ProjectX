function e(){}function t(t){let n;return function(t,...n){if(null==t)return e;const i=t.subscribe(...n);return i.unsubscribe?()=>i.unsubscribe():i}(t,(e=>n=e))(),n}function n(e){(function(){throw new Error("Function called outside component initialization")})().$$.after_update.push(e)}const i=[];function r(e,t){const n=parseFloat(t[0]);return(isNaN(e)?e.length:parseFloat(e))>=n}function s(e,t){const n=parseFloat(t[0]),i=isNaN(e)?e.length:parseFloat(e);return!!isNaN(i)||i<=n}var l=Object.freeze({__proto__:null,between:function(e,t){return r(e,[t[0]])&&s(e,[t[1]])},email:function(e,t){return Boolean(e)&&/^[a-zA-Z0-9_+&*-]+(?:\.[a-zA-Z0-9_+&*-]+)*@(?:[a-zA-Z0-9-]+\.)+[a-zA-Z]{2,7}$/.test(e)},max:s,min:r,required:function(e,t){if(null==e)return!1;if("string"==typeof e){return e.replace(/\s/g,"").length>0}return!0},url:function(e,t){return/(https?|ftp|git|svn):\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/i.test(e)},equal:function(e,t){return e===t[0]}});function a(e){return e.value}function o(e,t,{stopAtFirstFieldError:n}){const{name:i,value:r,validators:s=[],enabled:a=!0}=e;let o=!0,d=!1,c=[];return a&&s.some((e=>{const[s,a,u]=function(e,t,n,i,r=!0){let s,a=!0,o=!1;if(!1===r)return[a,s,o];if("function"==typeof n){const r=n.call(null,t);r.then?(o=!0,r.then((({name:t,valid:n})=>{i.update((i=>(i.fields[e]=i.fields[e]||{errors:[]},i.fields[e].pending=!1,i.fields[e].valid=n,n||i.fields[e].errors.push(t),i.valid=!Object.keys(i.fields).find((e=>!i.fields[e].valid)),i)))}))):(a=r.valid,s=r.name)}else{const e=n.split(/:/g);s=e.shift(),a=l[s].call(null,t,e)}return[a,s,o]}(i,r,e,t);if(!d&&u&&(o=!1,d=!0),!s)return o=!1,c=[...c,a],n})),{data:e,valid:o,errors:c,pending:d}}function d(e,{form:t,name:n,valid:i="valid",invalid:r="invalid",dirty:s="dirty"}){const l=n||e.getAttribute("name");return{destroy:t.subscribe((t=>{if(!t.fields.hasOwnProperty(l))return;const n=t.fields[l];(!t.initCheck&&n.dirty||t.initCheck)&&(n.valid?(e.classList.add(i),e.classList.remove(r)):(e.classList.remove(i),e.classList.add(r))),n.dirty?e.classList.add(s):e.classList.remove(s)}))}}function c(e){const t={data:{},errors:[],pending:!1,valid:!0,enabled:!0,dirty:!1};return Object.fromEntries(Object.keys(e).map((n=>[n,{name:e[n].name||n,value:e[n].value,...t}])))}function u(t,r={}){let s=c(t.call());r=Object.assign({initCheck:!0,validateOnChange:!0,stopAtFirstError:!1,stopAtFirstFieldError:!0},r);const l=function(t,n=e){let r;const s=[];function l(e){if(l=e,((n=t)!=n?l==l:n!==l||n&&"object"==typeof n||"function"==typeof n)&&(t=e,r)){const e=!i.length;for(let e=0;e<s.length;e+=1){const n=s[e];n[1](),i.push(n,t)}if(e){for(let e=0;e<i.length;e+=2)i[e][0](i[e+1]);i.length=0}}var n,l}return{set:l,update:function(e){l(e(t))},subscribe:function(i,a=e){const o=[i,a];return s.push(o),1===s.length&&(r=n(l)||e),i(t),()=>{const e=s.indexOf(o);-1!==e&&s.splice(e,1),0===s.length&&(r(),r=null)}}}}({fields:s,oldFields:{},dirty:!1,valid:!0,initCheck:r.initCheck}),{subscribe:a,set:o,update:d}=l;return r.validateOnChange&&n((()=>{f(t,l,s,r)})),r.initCheck&&f(t,l,s,r),{subscribe:a,set:o,update:d,validate(){f(t,l,s,r)},reset(){const e=t.call();s=c(e),f(t,l,s,r)}}}function f(e,n,i,r){const s=e.call(),l=t(n),d={fields:i,oldFields:{},dirty:!1,initCheck:r.initCheck};Object.keys(s).some((e=>{const t={name:e,...s[e]},c=l.fields[e]||{data:{},errors:[],pending:!1,valid:!0,enabled:!0,dirty:!1},u=i[e],f=a(t),p=a(c),v=t.enabled;if(v===c.enabled&&f&&f===p?(d.fields[e]=l.fields[e],v||(d.fields[e].valid=!0,d.fields[e].errors=[])):d.fields[e]=o(t,n,r),f!==u.value&&(d.dirty=!0),d.fields[e].dirty=f!==u.value,d.oldFields[e]=Object.assign({},c),r.stopAtFirstError)return!d.fields[e].valid})),d.valid=!Object.keys(d.fields).find((e=>!d.fields[e].valid)),n.set(d)}export{d as bindClass,u as form};
//# sourceMappingURL=bundle.es6.js.map
